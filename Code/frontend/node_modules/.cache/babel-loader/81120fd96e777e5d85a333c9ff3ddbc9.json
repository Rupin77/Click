{"ast":null,"code":"var _jsxFileName = \"T:\\\\School\\\\Click\\\\Group_09\\\\Code\\\\frontend\\\\src\\\\components\\\\Admin\\\\Products.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useAddProductMutation, useDeleteProductMutation, useGetProductsMutation, useUpdateProductMutation } from \"../../api/products\";\nimport Pagination from 'react-js-pagination';\nimport '../pagination.css';\nimport { Backdrop, Fade, makeStyles, Modal, TablePagination, TextField, Typography } from \"@material-ui/core\";\nimport swal from \"sweetalert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}));\nconst Container = styled.div`\n  padding: 20px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n`;\n_c = Container;\nconst TdCenter = styled.td`\n  text-align: center\n`;\n_c2 = TdCenter;\nconst Img = styled.img`\n  width: 100px\n`;\n_c3 = Img;\nconst TopButton = styled.button`\n  padding: 10px;\n  font-weight: 600;\n  cursor: pointer;\n  border: ${props => props.type === \"filled\" && \"non\"};\n  background-color: ${props => props.type === \"filled\" ? \"black\" : \"transparent\"};\n  color: ${props => props.type === \"filled\" && \"white\"};\n`;\n_c4 = TopButton;\n\nconst AdminProducts = ({\n  hasDiscount\n}) => {\n  _s();\n\n  var _productsData$product;\n\n  const [queryCategory, setQueryCategory] = useState(\"all\");\n  const [queryPrice, setQueryPrice] = useState(\"asc\");\n  const [productsData, setProductsData] = useState();\n  const [formTitle, setFormTitle] = useState('Add Product');\n  const [data, {\n    isLoading\n  }] = useGetProductsMutation();\n  const [addProduct, {\n    isAdding\n  }] = useAddProductMutation();\n  const [updateProduct, {\n    isUpdating\n  }] = useUpdateProductMutation();\n  const [deleteProduct, {\n    isDeleting\n  }] = useDeleteProductMutation();\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n\n  const handleOpen = (event, product) => {\n    if (product) {\n      setFormData({\n        _id: product._id,\n        title: product.title,\n        img: product.img,\n        description: product.description,\n        category: product.category,\n        price: product.price,\n        discount: product.discount,\n        currentQuantity: product.currentQuantity,\n        thresholdQuantity: product.thresholdQuantity\n      });\n    } else {\n      setFormData({\n        _id: '',\n        title: '',\n        img: '',\n        description: '',\n        category: '',\n        price: 0,\n        discount: 0,\n        currentQuantity: 0,\n        thresholdQuantity: 0\n      });\n    }\n\n    setOpen(true);\n  };\n\n  const handleDelete = (e, product, i) => {\n    deleteProduct(product._id).then(response => {\n      if (response.error) {\n        swal({\n          title: response.error.data,\n          icon: 'error'\n        });\n      } else {\n        swal({\n          title: `Product has been deleted`,\n          icon: 'success'\n        });\n\n        if (productsData === null || productsData === void 0 ? void 0 : productsData.products) {\n          let index = productsData.products.findIndex(p => p._id == mFormData._id);\n          let ps = productsData.products.slice();\n          ps.splice(i, 1);\n          setProductsData({ ...productsData,\n            products: [...ps]\n          });\n        }\n      }\n    });\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const [mFormData, setFormData] = useState({\n    _id: '',\n    title: '',\n    img: '',\n    description: '',\n    category: '',\n    price: 0,\n    discount: 0,\n    currentQuantity: 0,\n    thresholdQuantity: 0\n  });\n\n  const handleSubmit = event => {\n    event.preventDefault(); // Do something with mFormData, like send it to an API endpoint\n\n    console.log(mFormData);\n\n    if (mFormData._id) {\n      updateProduct(mFormData).then(product => {\n        if (product.error) {\n          swal({\n            title: product.error.data,\n            icon: 'error'\n          });\n        } else {\n          swal({\n            title: `Product has been updated`,\n            icon: 'success'\n          });\n\n          if (productsData === null || productsData === void 0 ? void 0 : productsData.products) {\n            let index = productsData.products.findIndex(p => p._id == mFormData._id);\n\n            if (index > -1) {\n              let ps = productsData.products.slice();\n              ps[index] = product.data;\n              setProductsData({ ...productsData,\n                products: [...ps]\n              });\n            }\n          }\n\n          handleClose();\n        }\n      });\n    } else {\n      addProduct(mFormData).then(product => {\n        if (product.error) {\n          swal({\n            title: product.error.data,\n            icon: 'error'\n          });\n        } else {\n          swal({\n            title: `Product has been added`,\n            icon: 'success'\n          });\n\n          if (productsData === null || productsData === void 0 ? void 0 : productsData.products) {\n            let ps = productsData.products.slice();\n            ps.push(product.data);\n            setProductsData({ ...productsData,\n              products: [...ps]\n            });\n          }\n\n          handleClose();\n        }\n      });\n    }\n  };\n\n  const handleInputChange = event => {\n    console.log(mFormData);\n    const {\n      name,\n      value\n    } = event.target;\n    if (typeof value == \"string\") setFormData({ ...mFormData,\n      [name]: value\n    });\n  };\n\n  const handlePageChange = e => {\n    data(`/admin/list?page=${e}`).then(res => {\n      if (res.error) return alert(res.error.data);\n      setProductsData(res.data);\n    });\n  };\n\n  useEffect(() => {\n    data(`/admin/list`).then(res => {\n      if (res.error) return alert(res.error.data);\n      setProductsData(res.data);\n    });\n  }, [queryCategory, queryPrice]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(TopButton, {\n        onClick: e => handleOpen(e, null),\n        type: \"filled\",\n        variant: \"contained\",\n        color: \"primary\",\n        children: \"Add new Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, this) : (productsData === null || productsData === void 0 ? void 0 : (_productsData$product = productsData.products) === null || _productsData$product === void 0 ? void 0 : _productsData$product.length) === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: \"100%\",\n            marginTop: \"20px\"\n          },\n          className: \"table-striped\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Sr\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Current Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Threshold Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: productsData === null || productsData === void 0 ? void 0 : productsData.products.map((product, i) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(TdCenter, {\n                  children: 1 + i\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TdCenter, {\n                  children: /*#__PURE__*/_jsxDEV(Img, {\n                    src: product.img,\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 232,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TdCenter, {\n                  children: product.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TdCenter, {\n                  children: [\"$\", product.price.toFixed(1)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TdCenter, {\n                  children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [product.currentQuantity || 0, (product.currentQuantity || 0) <= (product.thresholdQuantity || 0) && /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 241,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 241,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"badge-danger\",\n                        children: \"Getting out of stock\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 242,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true)]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TdCenter, {\n                  children: product.thresholdQuantity || 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TdCenter, {\n                  children: [/*#__PURE__*/_jsxDEV(TopButton, {\n                    onClick: e => handleOpen(e, product),\n                    variant: \"contained\",\n                    color: \"primary\",\n                    children: \"Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 25\n                  }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(TopButton, {\n                    onClick: e => handleDelete(e, product, i),\n                    type: \"filled\",\n                    variant: \"contained\",\n                    color: \"primary\",\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this)\n      }, void 0, false), productsData && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Pagination, {\n          activePage: +(productsData === null || productsData === void 0 ? void 0 : productsData.page) || 1,\n          itemsCountPerPage: +(productsData === null || productsData === void 0 ? void 0 : productsData.perPage) || 10,\n          totalItemsCount: (productsData === null || productsData === void 0 ? void 0 : productsData.total) || 0,\n          pageRangeDisplayed: 5,\n          onChange: handlePageChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this)\n      }, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Modal, {\n        className: classes.modal,\n        open: open,\n        onClose: handleClose,\n        closeAfterTransition: true,\n        BackdropComponent: Backdrop,\n        BackdropProps: {\n          timeout: 500\n        },\n        children: /*#__PURE__*/_jsxDEV(Fade, {\n          in: open,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.paper,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h5\",\n              gutterBottom: true,\n              children: formTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  id: \"title\",\n                  label: \"Title\",\n                  name: \"title\",\n                  value: mFormData.title,\n                  onChange: handleInputChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  id: \"description\",\n                  label: \"Description\",\n                  name: \"description\",\n                  value: mFormData.description,\n                  onChange: handleInputChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  id: \"img\",\n                  label: \"Img\",\n                  name: \"img\",\n                  value: mFormData.img,\n                  placeholder: \"Image path/url\",\n                  onChange: handleInputChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  id: \"category\",\n                  label: \"Category\",\n                  name: \"category\",\n                  value: mFormData.category,\n                  onChange: handleInputChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  id: \"price\",\n                  label: \"Price\",\n                  name: \"price\",\n                  value: mFormData.price,\n                  onChange: handleInputChange,\n                  type: \"number\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  id: \"discount\",\n                  label: \"Discount\",\n                  name: \"discount\",\n                  value: mFormData.discount,\n                  onChange: handleInputChange,\n                  type: \"number\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  id: \"currentQuantity\",\n                  label: \"CurrentQuantity\",\n                  name: \"currentQuantity\",\n                  value: mFormData.currentQuantity,\n                  onChange: handleInputChange,\n                  type: \"number\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  id: \"thresholdQuantity\",\n                  label: \"ThresholdQuantity\",\n                  name: \"thresholdQuantity\",\n                  value: mFormData.thresholdQuantity,\n                  onChange: handleInputChange,\n                  type: \"number\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TopButton, {\n                variant: \"contained\",\n                color: \"primary\",\n                type: \"filled\",\n                children: mFormData._id ? 'Update' : 'Submit'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(AdminProducts, \"KujdwjfQIgfjFxO21yef1VsfITg=\", false, function () {\n  return [useGetProductsMutation, useAddProductMutation, useUpdateProductMutation, useDeleteProductMutation, useStyles];\n});\n\n_c5 = AdminProducts;\nexport default AdminProducts;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"TdCenter\");\n$RefreshReg$(_c3, \"Img\");\n$RefreshReg$(_c4, \"TopButton\");\n$RefreshReg$(_c5, \"AdminProducts\");","map":{"version":3,"sources":["T:/School/Click/Group_09/Code/frontend/src/components/Admin/Products.jsx"],"names":["React","useEffect","useState","styled","useAddProductMutation","useDeleteProductMutation","useGetProductsMutation","useUpdateProductMutation","Pagination","Backdrop","Fade","makeStyles","Modal","TablePagination","TextField","Typography","swal","useStyles","theme","modal","display","alignItems","justifyContent","paper","backgroundColor","palette","background","boxShadow","shadows","padding","spacing","Container","div","TdCenter","td","Img","img","TopButton","button","props","type","AdminProducts","hasDiscount","queryCategory","setQueryCategory","queryPrice","setQueryPrice","productsData","setProductsData","formTitle","setFormTitle","data","isLoading","addProduct","isAdding","updateProduct","isUpdating","deleteProduct","isDeleting","classes","open","setOpen","handleOpen","event","product","setFormData","_id","title","description","category","price","discount","currentQuantity","thresholdQuantity","handleDelete","e","i","then","response","error","icon","products","index","findIndex","p","mFormData","ps","slice","splice","handleClose","handleSubmit","preventDefault","console","log","push","handleInputChange","name","value","target","handlePageChange","res","alert","length","width","marginTop","map","toFixed","page","perPage","total","timeout"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useAddProductMutation, useDeleteProductMutation, useGetProductsMutation, useUpdateProductMutation } from \"../../api/products\";\r\nimport Pagination from 'react-js-pagination';\r\nimport '../pagination.css';\r\n\r\n\r\nimport {\r\n  Backdrop,\r\n  Fade, makeStyles, Modal, TablePagination, TextField, Typography\r\n} from \"@material-ui/core\";\r\nimport swal from \"sweetalert\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  modal: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  paper: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n}));\r\n\r\nconst Container = styled.div`\r\n  padding: 20px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n`;\r\n\r\n\r\nconst TdCenter = styled.td`\r\n  text-align: center\r\n`;\r\n\r\nconst Img = styled.img`\r\n  width: 100px\r\n`;\r\n\r\nconst TopButton = styled.button`\r\n  padding: 10px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  border: ${(props) => props.type === \"filled\" && \"non\"};\r\n  background-color: ${(props) =>\r\n    props.type === \"filled\" ? \"black\" : \"transparent\"};\r\n  color: ${(props) => props.type === \"filled\" && \"white\"};\r\n`;\r\n\r\n\r\nconst AdminProducts = ({ hasDiscount }) => {\r\n  const [queryCategory, setQueryCategory] = useState(\"all\");\r\n  const [queryPrice, setQueryPrice] = useState(\"asc\");\r\n  const [productsData, setProductsData] = useState();\r\n  const [formTitle, setFormTitle] = useState('Add Product');\r\n  const [data, { isLoading }] = useGetProductsMutation();\r\n  const [addProduct, { isAdding }] = useAddProductMutation();\r\n  const [updateProduct, { isUpdating }] = useUpdateProductMutation();\r\n  const [deleteProduct, { isDeleting }] = useDeleteProductMutation();\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = (event, product) => {\r\n    if (product) {\r\n      setFormData({\r\n        _id: product._id,\r\n        title: product.title,\r\n        img: product.img,\r\n        description: product.description,\r\n        category: product.category,\r\n        price: product.price,\r\n        discount: product.discount,\r\n        currentQuantity: product.currentQuantity,\r\n        thresholdQuantity: product.thresholdQuantity,\r\n      })\r\n    } else {\r\n      setFormData({\r\n        _id: '',\r\n        title: '',\r\n        img: '',\r\n        description: '',\r\n        category: '',\r\n        price: 0,\r\n        discount: 0,\r\n        currentQuantity: 0,\r\n        thresholdQuantity: 0\r\n      })\r\n    }\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleDelete = (e, product, i) => {\r\n    deleteProduct(product._id).then(response => {\r\n      if (response.error) {\r\n        swal({\r\n          title: response.error.data,\r\n          icon: 'error'\r\n        })\r\n      } else {\r\n        swal({\r\n          title: `Product has been deleted`,\r\n          icon: 'success'\r\n        })\r\n        if (productsData?.products) {\r\n          let index = productsData.products.findIndex(p => p._id == mFormData._id);\r\n          let ps = productsData.products.slice();\r\n          ps.splice(i, 1);\r\n          setProductsData({ ...productsData, products: [...ps] })\r\n        }\r\n      }\r\n    })\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  const [mFormData, setFormData] = useState({\r\n    _id: '',\r\n    title: '',\r\n    img: '',\r\n    description: '',\r\n    category: '',\r\n    price: 0,\r\n    discount: 0,\r\n    currentQuantity: 0,\r\n    thresholdQuantity: 0\r\n  });\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    // Do something with mFormData, like send it to an API endpoint\r\n    console.log(mFormData);\r\n    if (mFormData._id) {\r\n      updateProduct(mFormData).then(product => {\r\n        if (product.error) {\r\n          swal({\r\n            title: product.error.data,\r\n            icon: 'error'\r\n          })\r\n        } else {\r\n          swal({\r\n            title: `Product has been updated`,\r\n            icon: 'success'\r\n          })\r\n          if (productsData?.products) {\r\n            let index = productsData.products.findIndex(p => p._id == mFormData._id);\r\n            if (index > -1) {\r\n              let ps = productsData.products.slice();\r\n              ps[index] = product.data;\r\n              setProductsData({ ...productsData, products: [...ps] })\r\n            }\r\n          }\r\n          handleClose();\r\n        }\r\n      })\r\n    } else {\r\n      addProduct(mFormData).then(product => {\r\n        if (product.error) {\r\n          swal({\r\n            title: product.error.data,\r\n            icon: 'error'\r\n          })\r\n        } else {\r\n          swal({\r\n            title: `Product has been added`,\r\n            icon: 'success'\r\n          })\r\n          if (productsData?.products) {\r\n            let ps = productsData.products.slice();\r\n            ps.push(product.data)\r\n            setProductsData({ ...productsData, products: [...ps] })\r\n          }\r\n          handleClose();\r\n        }\r\n      })\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (event) => {\r\n    console.log(mFormData);\r\n    const { name, value } = event.target;\r\n    if (typeof value == \"string\")\r\n      setFormData({ ...mFormData, [name]: value });\r\n\r\n  };\r\n  const handlePageChange = (e) => {\r\n    data(`/admin/list?page=${e}`).then((res) => {\r\n      if (res.error) return alert(res.error.data);\r\n      setProductsData(res.data);\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    data(`/admin/list`).then((res) => {\r\n      if (res.error) return alert(res.error.data);\r\n      setProductsData(res.data);\r\n    });\r\n  }, [queryCategory, queryPrice]);\r\n  return (\r\n    <>\r\n      <Container>\r\n        <TopButton onClick={(e) => handleOpen(e, null)} type='filled' variant=\"contained\" color=\"primary\" >\r\n          Add new Product\r\n        </TopButton>\r\n        {isLoading ? (\r\n          <p>Loading....</p>\r\n        ) : productsData?.products?.length === 0 ? (\r\n          <p>No Products</p>\r\n        ) : (\r\n          <>\r\n            <table style={{ width: \"100%\", marginTop: \"20px\" }} className=\"table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Sr</th>\r\n                  <th>Image</th>\r\n                  <th>Product</th>\r\n                  <th>Price</th>\r\n                  <th>Current Quantity</th>\r\n                  <th>Threshold Quantity</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {productsData?.products.map((product, i) => {\r\n                  return (\r\n                    <tr>\r\n                      <TdCenter>{1 + i}</TdCenter>\r\n                      <TdCenter>\r\n                        <Img src={product.img} alt=\"\" />\r\n                      </TdCenter>\r\n                      <TdCenter>{product.title}</TdCenter>\r\n                      <TdCenter>${product.price.toFixed(1)}</TdCenter>\r\n                      <TdCenter>\r\n                        <>\r\n                          {product.currentQuantity || 0}\r\n                          {(product.currentQuantity || 0) <= (product.thresholdQuantity || 0) &&\r\n                            <>\r\n                            <br /><br />\r\n                            <span className=\"badge-danger\">Getting out of stock</span>\r\n                            </>\r\n                          }\r\n                        </>\r\n                      </TdCenter>\r\n                      <TdCenter>{product.thresholdQuantity || 0}</TdCenter>\r\n                      <TdCenter>\r\n                        <TopButton onClick={(e) => handleOpen(e, product)} variant=\"contained\" color=\"primary\">\r\n                          Edit\r\n                        </TopButton>\r\n                        &nbsp;\r\n                        <TopButton onClick={(e) => handleDelete(e, product, i)} type='filled' variant=\"contained\" color=\"primary\" >\r\n                          Delete\r\n                        </TopButton>\r\n                      </TdCenter>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </>\r\n        )}\r\n        {productsData &&\r\n          <>\r\n            <Pagination\r\n              activePage={+productsData?.page || 1}\r\n              itemsCountPerPage={+productsData?.perPage || 10}\r\n              totalItemsCount={productsData?.total || 0}\r\n              pageRangeDisplayed={5}\r\n              onChange={handlePageChange}\r\n            />\r\n          </>\r\n        }\r\n      </Container>\r\n\r\n      <div>\r\n        <Modal\r\n          className={classes.modal}\r\n          open={open}\r\n          onClose={handleClose}\r\n          closeAfterTransition\r\n          BackdropComponent={Backdrop}\r\n          BackdropProps={{\r\n            timeout: 500,\r\n          }}\r\n        >\r\n          <Fade in={open}>\r\n            <div className={classes.paper}>\r\n              <Typography variant=\"h5\" gutterBottom>\r\n                {formTitle}\r\n              </Typography>\r\n              <form onSubmit={handleSubmit}>\r\n                <div>\r\n                  <TextField\r\n\r\n                    id=\"title\"\r\n                    label=\"Title\"\r\n                    name=\"title\"\r\n                    value={mFormData.title}\r\n                    onChange={handleInputChange}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <TextField\r\n\r\n                    id=\"description\"\r\n                    label=\"Description\"\r\n                    name=\"description\"\r\n                    value={mFormData.description}\r\n                    onChange={handleInputChange}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <TextField\r\n\r\n                    id=\"img\"\r\n                    label=\"Img\"\r\n                    name=\"img\"\r\n                    value={mFormData.img}\r\n                    placeholder=\"Image path/url\"\r\n                    onChange={handleInputChange}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <TextField\r\n\r\n                    id=\"category\"\r\n                    label=\"Category\"\r\n                    name=\"category\"\r\n                    value={mFormData.category}\r\n                    onChange={handleInputChange}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <TextField\r\n\r\n                    id=\"price\"\r\n                    label=\"Price\"\r\n                    name=\"price\"\r\n                    value={mFormData.price}\r\n                    onChange={handleInputChange}\r\n                    type=\"number\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <TextField\r\n\r\n                    id=\"discount\"\r\n                    label=\"Discount\"\r\n                    name=\"discount\"\r\n                    value={mFormData.discount}\r\n                    onChange={handleInputChange}\r\n                    type=\"number\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <TextField\r\n\r\n                    id=\"currentQuantity\"\r\n                    label=\"CurrentQuantity\"\r\n                    name=\"currentQuantity\"\r\n                    value={mFormData.currentQuantity}\r\n                    onChange={handleInputChange}\r\n                    type=\"number\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <TextField\r\n\r\n                    id=\"thresholdQuantity\"\r\n                    label=\"ThresholdQuantity\"\r\n                    name=\"thresholdQuantity\"\r\n                    value={mFormData.thresholdQuantity}\r\n                    onChange={handleInputChange}\r\n                    type=\"number\"\r\n                  />\r\n                </div>\r\n\r\n                <br />\r\n                <TopButton variant=\"contained\" color=\"primary\" type=\"filled\">\r\n                  {mFormData._id ? 'Update' : 'Submit'}\r\n                </TopButton>\r\n              </form>\r\n            </div>\r\n          </Fade>\r\n        </Modal>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AdminProducts;\r\n"]},"metadata":{},"sourceType":"module"}